import{H as V,C as F}from"./index-eFjSoLDB.js";import{A as M}from"./AppLoadingMask-IEc7RwFL.js";import{u as x,C,d as h,a as d,o as n,c as f,w as p,t as $,b as r,e as m,_ as k,r as I,l as v,f as w,F as g,m as A,s as U,j as B,y as G,k as H,n as c,v as z,p as j,g as D}from"./index-Njdadao4.js";const S=async a=>{try{const t=await x().getTeamById(a),s=C();return t&&s.setCurrentTeam(t),t}catch(e){throw console.log(e),e}},N=async()=>{try{const e=await x().getNonTeamUsers();return C().updateNonTeamUsers(e),e}catch(a){throw console.log(a),a}},E=async(a,e)=>{const t=x();try{await t.changeTeam(a,e)}catch(s){console.log(s)}},q={class:"team-member__content"},J={class:"team-member__username"},K={class:"team-member__actions"},O=h({__name:"index",props:{username:{}},emits:["remove"],setup(a,{emit:e}){const t=e;return(s,i)=>{const o=d("v-icon"),_=d("v-btn"),l=d("v-card");return n(),f(l,{class:"team-member"},{default:p(()=>[r("div",q,[r("div",J,$(s.username),1),r("div",K,[m(_,{density:"compact",variant:"text",size:"small",icon:"",onClick:i[0]||(i[0]=u=>t("remove"))},{default:p(()=>[m(o,{icon:"mdi mdi-close",color:"red"})]),_:1})])])]),_:1})}}}),P=k(O,[["__scopeId","data-v-b2f9d31d"]]),Q={class:"add-team-member"},W=h({__name:"index",emits:["start-addition"],setup(a,{emit:e}){const t=e,s=I(!1);return(i,o)=>{const _=d("v-icon"),l=d("v-btn");return n(),v("div",Q,[s.value?(n(),f(l,{key:1,density:"comfortable",color:"blue-accent-4",style:{"font-size":"10px"},onClick:o[1]||(o[1]=u=>{s.value=!1,t("start-addition",!1)})},{default:p(()=>[m(_,{icon:"mdi mdi-check",class:"mr-2"}),w(" done ")]),_:1})):(n(),f(l,{key:0,density:"comfortable",color:"blue-accent-4",style:{"font-size":"10px"},onClick:o[0]||(o[0]=u=>{s.value=!0,t("start-addition",!0)})},{default:p(()=>[m(_,{icon:"mdi mdi-plus",class:"mr-2"}),w(" add team member ")]),_:1}))])}}}),X=k(W,[["__scopeId","data-v-dab3ac86"]]),Y={class:"non-team-users"},Z={class:"non-team-users__list"},ee={class:"non-team-users__item"},te=h({__name:"index",props:{users:{default:()=>[]}},emits:["add-team"],setup(a,{emit:e}){const t=e;return(s,i)=>{const o=d("v-icon"),_=d("v-btn"),l=d("v-card");return n(),v("div",Y,[r("div",Z,[(n(!0),v(g,null,A(s.users,u=>(n(),f(l,{class:"non-team-users__card"},{default:p(()=>[r("div",ee,[m(_,{density:"compact",variant:"text",size:"small",icon:"",class:"mr-4",onClick:b=>t("add-team",u.id)},{default:p(()=>[m(o,{icon:"mdi mdi-arrow-left",color:"green"})]),_:2},1032,["onClick"]),r("div",null,$(u.username),1)])]),_:2},1024))),256))])])}}}),se=k(te,[["__scopeId","data-v-b3aa2e7b"]]),L=a=>(j("data-v-f443e05c"),a=a(),D(),a),ae={class:"team-card__header"},ne={class:"team-card__title"},oe={class:"team-card__content"},ce={class:"team-members"},re=L(()=>r("div",{class:"team-members__title"},"Team members",-1)),me={key:0,class:"team-members"},ie=L(()=>r("div",{class:"team-members__title"},"Non-team users",-1)),_e={key:1},de=h({__name:"index",async setup(a){let e,t;const s=C(),{isGlobalLoading:i}=U(B()),{id:o}=G.currentRoute.value.params,_=I(!1);[e,t]=H(()=>S(o)),await e,t();const l=async b=>{_.value=b,b&&(i.value=!0,await N(),i.value=!1)},u=async(b,T)=>{i.value=!0,await E(b,T),await S(o),await N(),i.value=!1};return(b,T)=>{const R=d("v-card");return n(),f(R,{class:"team-card"},{default:p(()=>[c(s).currentTeam?(n(),v(g,{key:0},[r("div",ae,[r("div",ne,$(c(s).currentTeam.name),1),m(c(X),{class:"team-members__add-team-member",onStartAddition:l})]),r("div",oe,[r("div",ce,[re,(n(!0),v(g,null,A(c(s).currentTeam.members,y=>(n(),f(c(P),{key:y.id,username:y.username,class:"team-members__item mb-3",onRemove:ue=>u(y.id,null)},null,8,["username","onRemove"]))),128))]),_.value?(n(),v("div",me,[ie,m(c(se),{users:c(s).nonTeamUsers,onAddTeam:T[0]||(T[0]=y=>u(y,c(o)))},null,8,["users"])])):z("",!0)])],64)):(n(),v("div",_e,"Нет данных по команде"))]),_:1})}}}),le=k(de,[["__scopeId","data-v-f443e05c"]]),be=h({__name:"index",setup(a){const{isGlobalLoading:e}=U(B());return(t,s)=>(n(),v("div",null,[m(c(V)),m(F,null,{default:p(()=>[m(c(le))]),_:1}),c(e)?(n(),f(c(M),{key:0})):z("",!0)]))}});export{be as default};
