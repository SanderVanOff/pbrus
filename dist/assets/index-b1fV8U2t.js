import{H as O,C as j}from"./index-eFjSoLDB.js";import{d as S,r as y,a as r,o as m,c as k,w as v,b as d,e as i,f as $,p as h,g as C,_ as w,h as P,t as g,u as x,i as N,s as I,j as U,k as A,l as T,m as z,F as B,n as p,q as G,v as L}from"./index-Njdadao4.js";import{u as H}from"./validators-_-2zLq2a.js";import{u as F}from"./uuidv4-qdT5rVQP.js";import{A as q}from"./AppLoadingMask-IEc7RwFL.js";const E=e=>(h("data-v-8f4ae95c"),e=e(),C(),e),J=E(()=>d("div",{class:"create-new-poker-session__title"},"Create new poker-session",-1)),K={class:"create-new-poker-session__content"},Q=S({__name:"index",emits:["create-team"],setup(e,{emit:t}){const s=t,a=y(null),o=async()=>{a.value&&(s("create-team",a.value),a.value=null)};return(c,l)=>{const f=r("v-text-field"),n=r("v-btn"),u=r("v-card");return m(),k(u,{class:"create-new-poker-session"},{default:v(()=>[J,d("div",K,[i(f,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=_=>a.value=_),density:"compact",variant:"outlined","hide-details":"",class:"mr-4"},null,8,["modelValue"]),i(n,{density:"comfortable",style:{"font-size":"10px"},color:"blue-accent-4",onClick:o},{default:v(()=>[$(" Create ")]),_:1})])]),_:1})}}}),W=w(Q,[["__scopeId","data-v-8f4ae95c"]]),X={class:"poker-session-card__title"},Y={class:"poker-session-card__title-text"},Z={class:"poker-session-card__creation-time"},ee=S({__name:"index",props:{title:{},creationTime:{}},setup(e){const t=e,s=P(()=>new Intl.DateTimeFormat("default",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date(t.creationTime)));return(a,o)=>{const c=r("v-card");return m(),k(c,{class:"poker-session-card"},{default:v(()=>[d("div",X,[d("div",Y,g(a.title),1),d("div",Z,g(s.value),1)])]),_:1})}}}),te=w(ee,[["__scopeId","data-v-289fbbd3"]]),se={loadAllPokerSession:async()=>{let t=await x().getAllPokerSession();t=t||[],N().fillPokerSession(t)}},ae=e=>(h("data-v-9b65df74"),e=e(),C(),e),oe=ae(()=>d("div",{class:"poker-session-list__title"},"Poker-sessions",-1)),ne={class:"poker-session-list__items"},ie=S({__name:"index",async setup(e){let t,s;const{isGlobalLoading:a}=I(U()),o=N(),c=P(()=>o.pokerSessions?o.pokerSessions.slice(-5):[]);return a.value=!0,[t,s]=A(()=>se.loadAllPokerSession()),await t,s(),a.value=!1,(l,f)=>{const n=r("RouterLink"),u=r("v-card");return m(),k(u,{class:"poker-session-list"},{default:v(()=>[oe,d("div",ne,[(m(!0),T(B,null,z(c.value,_=>(m(),k(n,{to:{name:"poker-session",params:{id:_.id}}},{default:v(()=>[(m(),k(p(te),{key:_.id,title:_.title,"creation-time":_.creationTime,class:"mb-3"},null,8,["title","creation-time"]))]),_:2},1032,["to"]))),256))])]),_:1})}}}),ce=w(ie,[["__scopeId","data-v-9b65df74"]]),le=async()=>await x().getAllTeams(),re=e=>(h("data-v-b64a33a5"),e=e(),C(),e),de={class:"select-team-card__header"},_e=re(()=>d("div",{class:"select-team-card__title"},"Team in session",-1)),me={class:"select-team-card__content"},ue={class:"select-team-card__actions"},pe=S({__name:"index",props:{isOpen:{type:Boolean,default:!0}},emits:["update:is-open","selected"],async setup(e,{emit:t}){let s,a;const o=t,c=y(null),l=([s,a]=A(()=>le()),s=await s,a(),s),f=()=>{o("selected",c.value),c.value=null};return(n,u)=>{const _=r("v-icon"),b=r("v-btn"),R=r("v-combobox"),D=r("v-card"),M=r("v-dialog");return m(),k(M,{"model-value":n.isOpen},{default:v(()=>[i(D,{class:"select-team-card"},{default:v(()=>[d("div",de,[_e,i(b,{density:"compact",variant:"text",size:"small",icon:"",onClick:u[0]||(u[0]=V=>o("update:is-open",!1))},{default:v(()=>[i(_,{icon:"mdi mdi-close"})]),_:1})]),d("div",me,[i(R,{modelValue:c.value,"onUpdate:modelValue":u[1]||(u[1]=V=>c.value=V),density:"compact",variant:"outlined",items:p(l),"item-title":"name","item-value":"id","return-object":!1},null,8,["modelValue","items"])]),d("div",ue,[i(b,{density:"compact",style:{"font-size":"10px"},class:"mr-4",onClick:u[2]||(u[2]=V=>o("update:is-open",!1))},{default:v(()=>[$(" cancel ")]),_:1}),i(b,{density:"compact",style:{"font-size":"10px"},color:"blue-accent-4",disabled:!c.value,onClick:f},{default:v(()=>[$(" done ")]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["model-value"])}}}),ve=w(pe,[["__scopeId","data-v-b64a33a5"]]),fe=async e=>{const t=x();try{await t.createNewTeam({id:F(),name:e})}catch(s){console.log(s)}},ke={class:"create-new-team"},be=S({__name:"index",setup(e){const{valueLength:t}=H(),s=y(null),a=y(!1),o=async()=>{s.value&&(await fe(s.value),s.value=null)};return(c,l)=>{const f=r("v-text-field"),n=r("v-icon"),u=r("v-btn"),_=r("v-form");return m(),T("div",ke,[i(_,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=b=>a.value=b),class:"create-new-team__form"},{default:v(()=>[i(f,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=b=>s.value=b),density:"compact",variant:"outlined","hide-details":"",rules:[b=>p(t)(b,2)],class:"mr-4"},null,8,["modelValue","rules"]),i(u,{density:"comfortable",color:"blue-accent-4",style:{"font-size":"10px"},disabled:!a.value,onClick:o},{default:v(()=>[i(n,{icon:"mdi mdi-plus",class:"mr-2"}),$(" create team ")]),_:1},8,["disabled"])]),_:1},8,["modelValue"])])}}}),Se=w(be,[["__scopeId","data-v-e15c817a"]]),we={class:"team-item"},ye={class:"team-item__title"},xe=S({__name:"index",props:{title:{}},setup(e){return(t,s)=>(m(),T("div",we,[d("div",ye,g(t.title),1)]))}}),Te=w(xe,[["__scopeId","data-v-6b82740f"]]),$e=async()=>await x().getAllTeams(),ge=e=>(h("data-v-64bbe4a4"),e=e(),C(),e),he=ge(()=>d("div",{class:"team-list__title"},"Teams",-1)),Ce={class:"team-list__content"},Ve=S({__name:"index",async setup(e){let t,s;const a=([t,s]=A(()=>$e()),t=await t,s(),t);return(o,c)=>{const l=r("RouterLink"),f=r("v-card");return m(),k(f,{class:"team-list"},{default:v(()=>[he,d("div",Ce,[(m(!0),T(B,null,z(p(a),n=>(m(),k(l,{to:{name:"team",params:{id:n.id}}},{default:v(()=>[(m(),k(p(Te),{key:n.id,title:n.name},null,8,["title"]))]),_:2},1032,["to"]))),256))]),i(p(Se))]),_:1})}}}),Ie=w(Ve,[["__scopeId","data-v-64bbe4a4"]]),Ne=async(e,t)=>{const s=x(),a=N(),o=await s.getTeamMembers(t),c={id:F(),title:e,creationTime:new Date().toString(),participants:o.map(l=>({id:l.id,username:l.username}))};await s.createNewSession(c),a.createNewSession(c)},Ae={class:"main-view"},Le=S({__name:"index",setup(e){const{isGlobalLoading:t}=I(U()),{currentUser:s}=I(G()),a=y(!1),o=y(null),c=f=>{o.value=f,a.value=!0},l=async f=>{o.value&&(a.value=!1,t.value=!0,await Ne(o.value,f),o.value=null,t.value=!1)};return(f,n)=>(m(),T("div",Ae,[i(p(O)),i(p(j),{class:"main-view__content"},{default:v(()=>{var u;return[d("div",null,[d("pre",null,g(o.value),1),((u=p(s))==null?void 0:u.role)==="admin"?(m(),k(p(W),{key:0,class:"mb-4",onCreateTeam:n[0]||(n[0]=_=>c(_))})):L("",!0),i(p(ce)),i(p(ve),{"is-open":a.value,"onUpdate:isOpen":n[1]||(n[1]=_=>a.value=_),onSelected:n[2]||(n[2]=_=>l(_))},null,8,["is-open"])]),d("div",null,[i(p(Ie))])]}),_:1}),p(t)?(m(),k(p(q),{key:0})):L("",!0)]))}}),Re=w(Le,[["__scopeId","data-v-82357d6d"]]);export{Re as default};
